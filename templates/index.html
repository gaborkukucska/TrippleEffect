<!-- # START OF FILE templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrippleEffect</title>
    <!-- Link to the CSS file -->
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>TrippleEffect Interface</h1>

        <!-- Main content area -->
        <div class="main-content">

            <!-- Area for displaying conversation messages (User and Agent) -->
            <div id="conversation-area" class="message-area conversation-area">
                <!-- Conversation messages will be dynamically added here -->
                <div class="message status initial-placeholder"><span>Conversation Area</span></div>
            </div>

            <!-- Area for displaying system/status/error messages -->
            <div id="system-log-area" class="message-area system-log-area">
                <!-- System/status messages will be dynamically added here -->
                 <div class="message status initial-placeholder"><span>System Logs & Status</span></div>
                 <div class="message status initial-connecting initial-placeholder"><span>Connecting to backend...</span></div>
            </div>

        </div> <!-- /main-content -->


        <!-- Input area for sending tasks/messages -->
        <div class="input-area">
            <textarea id="message-input" placeholder="Enter your task here..."></textarea>
            <div class="input-controls">
                <input type="file" id="file-input" accept=".txt,.py,.js,.html,.css,.md,.json,.yaml,.csv" style="display: none;"> <!-- Hidden file input -->
                <button id="attach-file-button" title="Attach text file">ðŸ“Ž</button> <!-- Button to trigger file input -->
                <button id="send-button">Send</button>
            </div>
        </div>
        <div id="file-info-area" class="file-info-area">
             <!-- Selected file info will be shown here -->
        </div>

        <!-- Configuration section -->
        <div class="config-area">
            <div class="config-header"> <!-- Added wrapper for header and button -->
                <h2>Configuration</h2>
                <div> <!-- Wrapper for buttons -->
                    <button id="refresh-config-button" class="config-action-button refresh-button" title="Refresh Page (Applies Config Changes on Restart)">ðŸ”„</button> <!-- Added Refresh -->
                    <button id="add-agent-button" class="config-action-button add-button" title="Add New Agent">+</button>
                </div>
            </div>
            <!-- Configuration content will be dynamically loaded here -->
            <div id="config-content">
                 <span class="status-placeholder">Loading config...</span>
            </div>
        </div>

         <!-- Agent status section -->
         <div class="agent-status-area">
            <h2>Agent Status</h2>
             <div id="agent-status-content">
                <!-- Agent status indicators will go here later -->
                <span class="status-placeholder">Waiting for status...</span>
             </div>
         </div>

    </div> <!-- /container -->

    <!-- Modal Dialog for Add/Edit Agent -->
    <div id="agent-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('agent-modal')">Ã—</span>
            <h3 id="modal-title">Add Agent</h3>
            <form id="agent-form">
                <input type="hidden" id="edit-agent-id" value=""> <!-- Hidden field for agent ID when editing -->

                <label for="agent-id">Agent ID:</label>
                <input type="text" id="agent-id" name="agent_id" required pattern="^[a-zA-Z0-9_-]+$" title="Alphanumeric, underscores, hyphens only">

                <label for="persona">Persona:</label>
                <input type="text" id="persona" name="persona">

                <label for="provider">Provider:</label>
                <select id="provider" name="provider" required>
                    <option value="openrouter">OpenRouter</option>
                    <option value="ollama">Ollama</option>
                    <option value="openai">OpenAI</option>
                    <!-- Add other providers if implemented -->
                </select>

                <label for="model">Model:</label>
                <input type="text" id="model" name="model" required>

                <label for="temperature">Temperature:</label>
                <input type="number" id="temperature" name="temperature" step="0.1" min="0" max="2.0" value="0.7">

                <label for="system_prompt">System Prompt:</label>
                <textarea id="system_prompt" name="system_prompt" rows="4"></textarea>

                <!-- Add fields for other config parameters if needed, e.g., base_url override -->
                 <!-- Example for extra KVP args (more complex UI needed for generic KVP) -->
                 <!--
                 <label for="extra-args">Extra Args (JSON):</label>
                 <textarea id="extra-args" name="extra_args" rows="2" placeholder='{"top_p": 0.9}'></textarea>
                 -->

                <div class="modal-actions">
                    <button type="submit" id="save-agent-button">Save Agent</button>
                    <button type="button" onclick="closeModal('agent-modal')">Cancel</button>
                </div>
                 <p class="restart-note">Note: Application restart is required for changes to take effect.</p>
            </form>
        </div>
    </div>


    <!-- Link to the JavaScript file -->
    <!-- Placed at the end of body for better performance -->
    <script src="/static/js/app.js"></script>
</body>
</html>
